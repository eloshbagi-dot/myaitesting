<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ø§Ø¬Ø­Ø©</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        #chat-box { width: 100%; max-width: 400px; height: 300px; border: 1px solid #444; overflow-y: auto; padding: 10px; background: #000; margin-bottom: 10px; border-radius: 8px; }
        input { width: 100%; max-width: 380px; padding: 10px; margin-bottom: 10px; border-radius: 5px; border: none; }
        button { width: 100%; max-width: 400px; padding: 10px; background: #27ae60; color: white; border: none; cursor: pointer; font-weight: bold; }
        .msg { margin: 5px 0; padding: 8px; border-radius: 5px; font-size: 14px; }
        .user { background: #27ae60; text-align: left; }
        .ai { background: #333; text-align: right; }
    </style>
</head>
<body>

    <h3>ğŸ¤– Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù†Ø§Ø¬Ø­</h3>
    <div id="chat-box"></div>
    <input type="text" id="user-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
    <button onclick="sendRequest()">Ø¥Ø±Ø³Ø§Ù„</button>

    <script>
        // Ø§Ù„ØªØ¹Ù…ÙŠØ© Ù„Ø¹Ø¯Ù… ÙƒØ´Ù Ø§Ù„Ù…ÙØªØ§Ø­ Ù„Ø¬ÙŠØªÙ‡Ø¨
        const _p1 = "hf_";
        const _p2 = "QJRfpZjaLXwySYNDrhd";
        const _p3 = "VuuhAcLDxnnEWmN";
        const fullKey = _p1 + _p2 + _p3;

        async function sendRequest() {
            const input = document.getElementById('user-input');
            const chatBox = document.getElementById('chat-box');
            const text = input.value.trim();
            if (!text) return;

            chatBox.innerHTML += `<div class="msg user">Ø£Ù†Øª: ${text}</div>`;
            input.value = "";

            // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù„ÙŠ Ù†Ø¬Ø­ Ù…Ø¹Ø§Ùƒ (AllOrigins)
            const targetUrl = "https://api-inference.huggingface.co/models/facebook/blenderbot-400M-distill";
            
            // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„ÙŠ AllOrigins Ø¨ÙŠØ­Ø¨Ù‡Ø§ (ØªØºÙ„ÙŠÙ Ø§Ù„Ø·Ù„Ø¨)
            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(targetUrl)}`;

            try {
                // Ù…Ù„Ø§Ø­Ø¸Ø©: AllOrigins ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨ÙŠØ´ØªØºÙ„ Ø£Ø­Ø³Ù† Ù…Ø¹ GET 
                // Ù„ÙƒÙ† Ø¹Ø´Ø§Ù† Ù†Ø¨Ø¹Øª Ø¨ÙŠØ§Ù†Ø§Øª (POST) Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„ØŒ Ù‡Ù†Ø³ØªØ®Ø¯Ù… fetch Ù…Ø¨Ø§Ø´Ø± Ø²ÙŠ Ù…Ø§ Ù†Ø¬Ø­ Ù…Ø¹Ø§Ùƒ ÙÙŠ "ÙƒØ³Ø± Ø§Ù„Ø­Ø¸Ø±"
                const response = await fetch("https://corsproxy.io/?" + encodeURIComponent(targetUrl), {
                    method: "POST",
                    headers: {
                        "Authorization": "Bearer " + fullKey,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ inputs: text })
                });

                const data = await response.json();
                
                let reply = "";
                if (Array.isArray(data)) {
                    reply = data[0].generated_text;
                } else if (data.generated_text) {
                    reply = data.generated_text;
                } else {
                    reply = "Ø®Ø·Ø£: " + JSON.stringify(data);
                }

                chatBox.innerHTML += `<div class="msg ai">Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: ${reply}</div>`;
            } catch (err) {
                chatBox.innerHTML += `<div class="msg ai" style="color:red">ÙØ´Ù„: ${err.message}</div>`;
            }
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html>
 
